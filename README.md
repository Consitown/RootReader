# RootReader

  

This helps you to read in WaveCatcher binary files and convert them to .root files.

  
  

![Demo](demo.PNG)

  
  
  

### How to run it?

Firstly, it needs to run in a C environment (better C++) with pre-installed ROOT framework (https://root.cern.ch/). If it is used on Windows, the best way would be to use a WSL (Windows subsystem for linux). This can be installed directly from Microsoft Store (e.g. search for Ubuntu). This works only on Windows 10, here is a tutorial:

https://medium.com/@blake.leverington/installing-cern-root-under-windows-10-with-subsystem-for-linux-beta-75295defc6d4
(I recommend using a pre-build version of ROOT)

If everything is installed correctly just start the software like you would start any other script:

> ./RunHelper.sh

  

### Purpose & Customisation

This tool is designed to read binary data produced by the WaveCatcher software into a ROOT tree. This works by calculating pre-defined observables (integral, amplitude, time,...) for each signal. The ROOT file finally combines all the results into histograms. Which observables are calculated depends on the purpose of the measurement. I personally did efficiency measurements that mainly require integrals to be calculated. However, when dealing with other purposes such as timing resolution studies etc. the pre-defined observables need to be changed.
This can be done by adjusting the section inside the read.C file. This file provides the main read in algorithm and is the heart of the software kit. Unfortunately, it is not possible to describe every part of this script, it is therefore necessary to analyze the read.C file and get familiar with the parts. I tried my best to make it as clear as possible.

  
  

### Output
The output depends on the settings in the read.C file. At its default, it will generate the following files:

 - waves.pdf : individual waveforms, printed eventwise for specific events (printing can be defined using booleans inside the read.C file, e.g. allowForcePrinting), mainly used to debug
 - RUNNAME.root: the root file containing all the calculated data, this will be used to carry out the analysis, also contains several histograms
 -  ChSum.pdf: channel-wise sum of all events in a run, mainly used for debugging
 - womSum.pdf: sums up all events belonging to a specific WOM, this is based on WOM-IDs. WOM= Wavelength-shifting Optical Module, see master thesis

  

### Additional text files

Data is transferred and read in from text files. The script is designed to depend on some specific files:

 - analysisPath.txt (placed inside the root (not ROOT) directory), Tools features depend on it. Points to the root directory of https://github.com/Uni2K/RootAnalysis
 - src/CorrectionValues.txt: Created by the IntegrationsWindowAnalysis script inside of the RootAnalysis package, contains correction values needed for correct integral determination
 - src/IntegrationWindows.txt:  Same as CorrectionValues.txt but this time it holds the integration bounds
 - src/Baselines.txt: Holds the constant baselines of a run, they are generated by BaselineAverage.sh inside of the RootAnalysis package
 - src/CalibrationValues.txt: Holds the calibration values,  they are needed to convert arbitrary integral units (e.g. mVxns) to number-of-photoelectrons. They are calculated using the FitCharge.sh (GainFit) method from the RootAnalysis package. Difficult to obtain, contains WOM-D default values.

Its always possible to use dummy values, however, it must be checked if the values are correct. This can be done by seeing the legend in the waves.pdf file or the output in the terminal. The read.C script usually searches for values with the same runName.



  
  
 

### Headersizes & WC versions

If the binary files are written with a specific WaveCatcher version, the header of these binary files may also vary. A wrong header size almost always ends up in a segmentation fault.

The script offers an automatic headersize detection mode (set headersize on "a" -> default), which checks the header for every binary file.

Using this feature, its also possible to read in different binary files from different WaveCatcher versions automatically.

  

### Config

Its possible to save and load a small config, which is just a text file. This helps if you are working with different settings and want to save some time :)

  

For instant help just open the menu item and view some helpful informations.

  

Support: *jan4995@gmail.com*
